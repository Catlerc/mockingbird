"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;

exports.__esModule = true;
exports.useControlledFocus = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _react = require("react");

var _useCallbackRef = require("use-callback-ref");

var useControlledFocus = function useControlledFocus(props) {
  var ref = props.ref,
      focused = props.focused,
      onFocus = props.onFocus,
      onBlur = props.onBlur;
  var localRef = (0, _react.useRef)(null);
  var mergedRef = (0, _useCallbackRef.useMergeRefs)([localRef, ref]);
  var handleFocus = (0, _react.useCallback)(function (event) {
    if (!focused) {
      onFocus(event);
    }
  }, [focused, onFocus]);
  var handleBlur = (0, _react.useCallback)(function (event) {
    if (focused) {
      onBlur(event);
    }
  }, [focused, onBlur]);
  (0, _react.useEffect)(function () {
    var element = localRef.current;

    if (focused && element && element !== document.activeElement) {
      element.focus();
    }

    if (!focused && element && element === document.activeElement) {
      element.blur();
    }
  }, [focused]);
  return (0, _extends2.default)({}, props, {
    ref: mergedRef,
    onFocus: handleFocus,
    onBlur: handleBlur
  });
};

exports.useControlledFocus = useControlledFocus;