import React, { useState } from 'react';
import hoistStatics from 'hoist-non-react-statics';
import styles from './autofillHOC.module.css';

const autofillHOC = WrappedComponent => {
  const WithAutofill = props => {
    const [autofilled, setAutofilled] = useState(false);

    const handleAnimationStart = event => {
      if (event.animationName === styles.onAutoFillStart) {
        setAutofilled(true);
      }

      if (event.animationName === styles.onAutoFillCancel) {
        setAutofilled(false);
      }
    };

    return /*#__PURE__*/React.createElement(WrappedComponent, Object.assign({}, props, autofilled ? {
      filled: true,
      placeholder: ''
    } : {}, {
      autoComplete: true,
      autofilled: autofilled,
      onAnimationStart: handleAnimationStart
    }));
  };

  return hoistStatics(WithAutofill, WrappedComponent);
};

export default autofillHOC;