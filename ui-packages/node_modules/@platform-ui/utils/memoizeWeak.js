"use strict";

exports.__esModule = true;
exports.default = void 0;

/**
 * Simple memoization using WeakMap.
 * Only suitable for functions with single argument of non-primitive type.
 *
 * @param {Function} fn
 * @returns {Function}
 * @example
 *     const obj = {};
 *     const memoized = memoizeWeak(obj => ({ ...obj }));
 *     console.log(memoized(obj) === memoized(obj)) // true
 */
var memoizeWeak = function memoizeWeak(fn) {
  if (typeof WeakMap === 'undefined') {
    return fn;
  }

  var cache = new WeakMap();
  return function (obj) {
    if (cache.has(obj)) {
      return cache.get(obj);
    }

    var result = fn(obj);
    cache.set(obj, result);
    return result;
  };
};

var _default = memoizeWeak;
exports.default = _default;