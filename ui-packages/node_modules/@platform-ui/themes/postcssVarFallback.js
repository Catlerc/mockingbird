"use strict";

var postcssVarFallback = function postcssVarFallback(options) {
  return {
    postcssPlugin: 'postcss-var-fallback',
    Declaration: function Declaration(decl) {
      var variables = options.variables; // eslint-disable-next-line no-param-reassign

      decl.value = decl.value.replace(/(^|[^\w-])var\(([^\(\)]+)\)/g, function (match, prefix, varName) {
        if (!variables[varName]) {
          return match;
        }

        return prefix + "var(" + varName + ", " + variables[varName] + ")";
      });
    }
  };
};

module.exports = {
  postcssVarFallback: postcssVarFallback
};