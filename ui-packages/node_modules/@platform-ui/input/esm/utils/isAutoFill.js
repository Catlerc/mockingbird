/* eslint-disable compat/compat */
export const IS_SERVER_RUNTIME = !(typeof window !== 'undefined' && window.document);

const memoizeUserAgent = fn => {
  if (IS_SERVER_RUNTIME) {
    return () => false;
  }

  let result;
  return () => {
    if (result === undefined) {
      result = fn();
    }

    return result;
  };
}; // IE или Edge


export const isMS = memoizeUserAgent(() => {
  return Boolean(navigator.userAgent.match(/MSIE/i) || navigator.userAgent.match(/Trident/i) || navigator.userAgent.match(/Edge/i));
});
const EDGE_AUTO_FILL_FLAG = 'AutoFill_FillEvent';
/**
 * https://
 * Проверки проверенно работают только для edge и chrome. В сафари автозаполняются только поля в фокусе, а в
 * firefox автозаполнение не заработало.
 */

export default function (event) {
  const native = event.nativeEvent;
  return isMS() && event.detail === EDGE_AUTO_FILL_FLAG || !isMS() && native.type === 'input' && typeof window.InputEvent !== 'undefined' && !(native instanceof window.InputEvent);
}
/* eslint-enable */
