"use strict";

exports.__esModule = true;
exports.useTimer = void 0;

var _react = require("react");

var useTimer = function useTimer(callback, timeout) {
  var _useState = (0, _react.useState)(),
      timerId = _useState[0],
      setTimerId = _useState[1];

  var _useState2 = (0, _react.useState)(),
      timeLeft = _useState2[0],
      setTimeLeft = _useState2[1];

  var _useState3 = (0, _react.useState)(),
      timerStartTime = _useState3[0],
      setTimerStartTime = _useState3[1];

  var setTimer = function setTimer() {
    if (!timeout) {
      return;
    }

    if (timeLeft === undefined) {
      setTimeLeft(timeout);
    }

    clearTimeout(timerId);
    setTimerStartTime(Date.now());
    setTimerId(window.setTimeout(callback, timeout));
  };

  var pauseTimer = function pauseTimer() {
    if (!timeout || !timerStartTime || !timeLeft) {
      return;
    }

    var timerPauseTime = Date.now();
    var timeElapsed = timerPauseTime - timerStartTime;
    setTimeLeft(timeLeft - timeElapsed);
    setTimerStartTime(undefined);
    clearTimeout(timerId);
  };

  (0, _react.useEffect)(function () {
    return function () {
      clearTimeout(timerId);
    };
  }, [timerId]);
  return {
    setTimer: setTimer,
    pauseTimer: pauseTimer
  };
};

exports.useTimer = useTimer;