"use strict";

exports.__esModule = true;
exports.useElementSize = void 0;

var _react = require("react");

var useElementSize = function useElementSize(ref) {
  var _useState = (0, _react.useState)(null),
      size = _useState[0],
      setSize = _useState[1];

  var observer = (0, _react.useRef)(null);
  (0, _react.useEffect)(function () {
    if (typeof ResizeObserver !== 'undefined') {
      observer.current = new ResizeObserver(function (entries) {
        var _entries$0$contentRec = entries[0].contentRect,
            width = _entries$0$contentRec.width,
            height = _entries$0$contentRec.height;
        setSize({
          width: width,
          height: height
        });
      });
    }

    if (ref.current) {
      if (observer.current) {
        observer.current.observe(ref.current);
      } else {
        var _ref$current$getBound = ref.current.getBoundingClientRect(),
            width = _ref$current$getBound.width,
            height = _ref$current$getBound.height;

        setSize({
          width: width,
          height: height
        });
      }
    }

    return function () {
      if (observer.current) {
        observer.current.disconnect();
      }
    };
  }, [ref]);
  return size;
};

exports.useElementSize = useElementSize;