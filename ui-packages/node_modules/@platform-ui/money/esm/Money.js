import _extends from "@babel/runtime/helpers/extends";
import _objectWithoutPropertiesLoose from "@babel/runtime/helpers/objectWithoutPropertiesLoose";
const _excluded = ["color", "cobrowsingSecure", "digitGroupingSeparator", "decimalSeparator", "symbolPosition", "children", "dataQaData", "dataQaType", "value", "showPlus", "styledSmalls", "showSmalls", "showCurrencyWithNull", "trimZeros"];
import React from 'react';
import cn from 'classnames';
import dataQa from '@platform-ui/dataQa';
import { formatMoney } from './utils';
import currencies from './currencies.json';
import styles from './Money.module.css';
export const PropTypes = {
  currency: Object.keys(currencies)
};

const Money = _ref => {
  let {
    color,
    cobrowsingSecure,
    digitGroupingSeparator = '\u0020',
    decimalSeparator = ',',
    symbolPosition = 'postfix',
    children,
    dataQaData,
    dataQaType = 'uikit/money',
    value = 0,
    showPlus = false,
    styledSmalls = true,
    showSmalls = true,
    showCurrencyWithNull = true,
    trimZeros = true
  } = _ref,
      otherProps = _objectWithoutPropertiesLoose(_ref, _excluded);

  const {
    sign,
    numerals,
    smalls,
    currency
  } = formatMoney(_extends({
    decimalSeparator,
    showPlus,
    showSmalls,
    showCurrencyWithNull,
    trimZeros,
    value
  }, otherProps));
  const layout = {
    prefix: '',
    postfix: ''
  };
  layout[symbolPosition] = currency;
  return /*#__PURE__*/React.createElement("span", Object.assign({}, dataQa({
    dataQaData,
    dataQaType
  }), {
    "data-cobrowsing-secure": cobrowsingSecure ? 'text' : undefined,
    className: cn({
      [styles.money]: true,
      [styles[`money_color_${color}`]]: color
    })
  }), sign, currency && layout.prefix, children || numerals.map((numeral, index) =>
  /*#__PURE__*/
  // eslint-disable-next-line react/no-array-index-key
  React.createElement(React.Fragment, {
    key: index
  }, index !== 0 && digitGroupingSeparator, numeral)), /*#__PURE__*/React.createElement("span", {
    className: styledSmalls ? styles.smalls : undefined
  }, smalls, currency && /*#__PURE__*/React.createElement(React.Fragment, null, "\xA0", layout.postfix)));
};

export default Money;