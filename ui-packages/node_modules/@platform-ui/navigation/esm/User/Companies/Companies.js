import React, { Fragment } from 'react';
import dataQa from '@platform-ui/dataQa';
import CompaniesItem from './CompaniesItem';
import styles from './Companies.module.css';

const Companies = props => {
  const {
    companies,
    onClick,
    mobile
  } = props;
  const sortedCompanies = companies.reduce((acc, company) => {
    const key = company.group || 'undefined';
    acc[key] = [...(acc[key] || []), company];
    return acc;
  }, {});
  return /*#__PURE__*/React.createElement("div", Object.assign({
    className: styles.root
  }, dataQa(props)), Object.keys(sortedCompanies).map((groupName, groupIndex) =>
  /*#__PURE__*/
  // eslint-disable-next-line react/no-array-index-key
  React.createElement(Fragment, {
    key: groupIndex
  }, groupName !== 'undefined' ? /*#__PURE__*/React.createElement("div", {
    className: styles.groupName
  }, groupName) : null, groupIndex === 0 && groupName === 'undefined' ? /*#__PURE__*/React.createElement("div", {
    className: styles.groupName
  }, "\u041A\u043E\u043C\u043F\u0430\u043D\u0438\u0438") : null, sortedCompanies[groupName].map((itemProps, itemIndex) => {
    const key = `${groupIndex}-${itemIndex}`;
    return /*#__PURE__*/React.createElement(CompaniesItem, Object.assign({
      key: key,
      onClick: onClick
    }, itemProps, {
      mobile: mobile
    }));
  }))));
};

export default Companies;