import { PORTAL_WRAPPER_ATTR_NAME, PORTAL_EXIT_ATTR_NAME } from './constants';
export const setRef = (ref, value) => {
  if (!ref) {
    return;
  }

  if (typeof ref === 'function') {
    ref(value);
  } else {
    // eslint-disable-next-line no-param-reassign
    ref.current = value;
  }
};
export const findClosestPortalExit = el => {
  const portalWrapper = el.closest(`[${PORTAL_WRAPPER_ATTR_NAME}]`);

  if (!portalWrapper) {
    return document.body;
  }

  const portalExit = portalWrapper.querySelector(`[${PORTAL_EXIT_ATTR_NAME}]`);
  return portalExit || document.body;
};
export const findPortalExitByName = name => {
  if (name === 'body') {
    return document.body;
  }

  const portalExit = document.querySelector(`[${PORTAL_EXIT_ATTR_NAME}=${name}]`);
  return portalExit || document.body;
};
export const findPortalExit = (anchor, to) => {
  if (!to) {
    return findClosestPortalExit(anchor);
  }

  if (typeof to === 'string') {
    return findPortalExitByName(to);
  }

  return document.body;
};